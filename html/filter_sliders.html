<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>jQuery UI Slider - Range slider</title>

    <!-- Moved from checkbox.html -->
    <script>
        $(document).ready(function () {
            $("#classification_checkboxes").on("change", function () {
                updateFilterInfo();
            });
        });
    </script>

    <script>
        let default_values = {
            min_year: 1950,
            max_year: 2013,
            min_mass: 0,
            max_mass: 1000
        }


        $(function () {
            $("#slider-range").slider({
                range: true,
                min: 861,
                max: 2013,
                values: [default_values.min_year, default_values.max_year],

                slide: function (event, ui) {
                    if (ui.values[0] < 0) {
                        positive_x = ui.values[0]
                    } else {
                        positive_x = ui.values[0]
                    }
                    if (ui.values[1] < 0) {
                        positive_y = ui.values[1]
                    } else {
                        positive_y = ui.values[1]
                    }
                    $("#min_year").val(positive_x);
                    $("#max_year").val(positive_y);
                    // call function to update data
                    updateFilterInfo();

                    // $("#amount").val(positive_x + " - " + positive_y);

                }
            });
        });
        $(function () {
            $("#slider-range_mass").slider({
                range: true,
                min: 0,
                max: 60000000,
                values: [default_values.min_mass, default_values.max_mass],

                slide: function (event, ui) {
                    $("#min_mass").val(ui.values[0]);
                    $("#max_mass").val(ui.values[1]);
                    updateFilterInfo();
                }
            });
        });
        // error handling for textboxes
        $(function () {
            $("#slider-range-latitude").slider({
                range: true,
                min: -180,
                max: 180,
                values: [-180, 180],

                slide: function (event, ui) {
                    if (ui.values[0] < this.min) {
                        ui.values[0] = this.min;
                    }

                    if (ui.values[1] > this.max) {
                        ui.values[1] = this.max;
                    }
                    $("#min_lat").val(ui.values[0]);
                    $("#max_lat").val(ui.values[1]);
                    updateFilterInfo();
                }
            });
        });

        // error handling for checkboxes
        $(function () {
            $("#slider-range-longitude").slider({
                range: true,
                min: -180,
                max: 180,
                values: [-180, 180],

                slide: function (event, ui) {
                    if (ui.values[0] < this.min) {
                        ui.values[0] = this.min;
                    }

                    if (ui.values[1] > this.max) {
                        ui.values[1] = this.max;
                    }
                    $("#min_long").val(ui.values[0]);
                    $("#max_long").val(ui.values[1]);
                    updateFilterInfo();
                }
            });
        });



        function updateFilterInfo() {
            globeRender();
        }

        function getFilterInfo() {

            // pull values from above functions to pass to globe render
            slider_settings.min_year = $("#min_year").val();
            slider_settings.max_year = $("#max_year").val();
            slider_settings.min_mass = $("#min_mass").val();
            slider_settings.max_mass = $("#max_mass").val();
            slider_settings.min_latitude = $("#min_lat").val();
            slider_settings.max_latitude = $("#max_lat").val();
            slider_settings.min_longitude = $("#min_long").val();
            slider_settings.max_longitude = $("#max_long").val();
            slider_settings.classifications = [];
            $("#classification_checkboxes input").each(function () {
                // if the option is checked put it in the array
                if ($(this).is(":checked")) {
                    slider_settings.classifications.push($(this).val());
                }
            })
            console.log('abel', slider_settings.classifications.toString())
            return slider_settings;
        }

    </script>
</head>

<body>
    <h4><strong>Range of Years: </strong></h4>

    <!-- <input type="text" id="amount" readonly style="border:0; color:#f6931f; font-weight:bold;"> -->
    <table class="slider_table">
        <tr>
            <td class="label_size"><label id="min_year_label" for="min_year" class="input_label">Min</label></td>
            <td><input type="number" name="min_year" id="min_year" min="861" value="1950" maxlength="4"
                    class="input_box">
            </td>
            <td class="label_size"><label id="max_year_label" for="max_year" class="input_label">Max</label></td>
            <td><input type="number" name="max_year" id="max_year" value="2013" maxvalue="2013" maxlength="4"
                    class="input_box"></td>
        </tr>
    </table>
    <div id="slider-range"></div>

    <h4><strong> Mass (in grams): </strong></h4>
    <!-- <input type="text" id="amount2" readonly style="border:0; color:#f6931f; font-weight:bold;"> -->
    <table class="slider_table">
        <tr>
            <td class="label_size"> <label id="min_mass_label" for="min_mass">Min</label> </td>
            <td> <input type="number" name="min_mass" id="min_mass" min="0" max="60000000" value="0" maxlength="8"
                    class="input_box"> </td>
            <td class="label_size"><label id="max_mass_label" for="max_mass">Max</label></td>
            <td><input type="number" name="max_mass" id="max_mass" min="0" max="60000000" value="2500000" maxlength="8"
                    class="input_box"></td>
        </tr>
    </table>


    <div id="slider-range_mass"></div>
    <h4><strong>Latitude/Longitude (respectively):</strong></h4>
    <table class="slider_table">
        <tr>
            <td class="label_size"><label id="min_latitude_label" for="min_lat">Min</label></td>
            <td><input type="number" name="min_latitude" id="min_lat" value="-180" min="-180" max="180" maxlength="4"
                    class="input_box"></td>
            <td class="label_size"><label id="max_latitude_label" for="max_lat">Max</label></td>
            <td><input type="number" name="max_latitude" id="max_lat" value="180" min="-180" max="180" maxlength="4"
                    class="input_box"></td>
        </tr>
    </table>

    <div id="slider-range-latitude"></div>
    <table class="slider_table">
        <tr>
            <td class="label_size" id="min_longitude_label" for="min_long">Min</label></td>
            <td><input type="number" name="min_longitude" id="min_long" min="-180" max="180" value="-180" maxlength="4"
                    class="input_box"></td>
            <td class="label_size"><label id="max_longitude_label" for="max_long">Max</label></td>
            <td><input type="number" name="max_longitude_label" id="max_long" min="-180" max="180" value="180"
                    maxlength="4" class="input_box"></td>
        </tr>
    </table>

    <div id="slider-range-longitude"></div>

    <p><strong>Found vs Fell:</strong></p>

    <table>
        <tr>
            <td><input type="checkbox" id="found" name="found" value="true" checked>
            <td></td>
            <td><label for="found">Found</label></td>

            <td><input type="checkbox" id="fell" name="fell" value="true"></td>
            <td><label for="fell">Fell</label></td>
    </table>
    <br>

    <p><strong>Yearless Meteorites:</strong></p>

    <table>
        <tr>
            <td><input onchange="globeRender()" type="checkbox" id="yearless_meteorites" name="yearless_meteorites">
            <td><label for="yearless_meteorites">Yearless Meteorites</label></td>
        </tr>
    </table>
    <br>

    <p><strong>Classifications:</strong></p>
    <table id="classification_checkboxes">
        <tr>
            <td>
                <input type="checkbox" checked name="Chondrite" value="Chondrite"></input>
                <label for="Chondrite">Chondrite</label>
            </td>
            <td>
                <input type="checkbox" checked name="Achondrites" value="Achondrites"></input>
                <label for="Achondrites">Achondrites</label>
            </td>
        </tr>

        <tr>
            <td>
                <input type="checkbox" checked name="Iron" value="Iron"></input>
                <label for="Iron">Iron</label>
            </td>
            <td>
                <input type="checkbox" checked name="Stony-Iron" value="Stony-Iron"></input>
                <label for="Stony-Iron">Stony-Iron</label>
            </td>
        </tr>

        <tr>
            <td>
                <input type="checkbox" checked name="Relicts" value="Relicts"></input>
                <label for="Relicts">Relicts</label>
            </td>
            <td>
                <input type="checkbox" checked name="Unknown" value="Unknown"></input>
                <label for="Unknown">Unknown</label>


            </td>
        </tr>







    </table>

    <div>
    </div>



</body>

</html>